{"version":3,"sources":["just-validate.js"],"names":["__defProp","Object","defineProperty","__defNormalProp","e","i","t","enumerable","configurable","writable","value","__publicField","_typeof","exports","module","define","amd","globalThis","self","JustValidate","s","l","r","Required","Email","MinLength","MaxLength","Password","Number","Integer","MaxNumber","MinNumber","StrongPassword","CustomRegexp","MinFilesCount","MaxFilesCount","Files","o","a","Label","LabelArrow","n","key","dict","en","d","then","c","Array","isArray","filter","length","trim","_toConsumableArray","split","u","Element","HTMLDocument","h","errorFieldStyle","color","border","errorFieldCssClass","successFieldCssClass","errorLabelStyle","errorLabelCssClass","successLabelCssClass","focusInvalidField","lockForm","testingMode","validateBeforeSubmitting","submitFormAutomatically","_class","_this","this","_classCallCheck","Map","fieldIds","get","_step","_iterator","_createForOfIteratorHelper","done","_step$value","_slicedToArray","err","f","keys","fields","forEach","getFieldSelectorByKey","_objectSpread","has","String","size","set","tooltips","refresh","lastScrollPosition","window","scrollY","isScrollTick","requestAnimationFrame","refreshAllTooltips","preventDefault","isSubmitted","validateHandler","elem","touched","validateField","groupFields","elems","find","validateGroup","target","handleFieldChange","handleGroupChange","renderErrors","initialize","_createClass","form","errors","isValid","globalConfig","errorLabels","successLabels","eventListeners","customStyleTags","currentLocale","document","querySelector","Error","concat","setForm","HTMLFormElement","dictLocale","isTooltip","createElement","textContent","head","appendChild","addListener","handleDocumentScroll","replace","errorMessage","getElemValue","getLocalisedString","rule","successMessage","getFieldErrorMessage","getFieldSuccessMessage","getGroupErrorMessage","getGroupSuccessMessage","type","checked","files","every","setGroupInvalid","setGroupValid","_this2","arguments","undefined","plugin","getCompatibleFields","setFieldInvalid","test","console","error","isNaN","parseFloat","RegExp","b","isFinite","minSize","maxSize","names","includes","name","extensions","types","item","validator","asyncCheckPending","values","_this3","rules","reverse","validateFieldRule","push","setFieldValid","config","Promise","allSettled","onValidateCallback","call","isFormValid","groups","_this4","getKeyByFieldSelector","clearFieldStyle","clearFieldLabel","renderFieldError","reject","_this5","renderGroupError","_this6","validateGroupRule","_this7","_loop","setTimeout","focus","_this8","afterSubmitValidation","_this9","_this10","validate","unlockForm","onSuccessCallback","currentTarget","submit","onFailCallback","setAttribute","removeListener","formSubmitHandler","addEventListener","func","removeEventListener","join","setKeyByFieldSelector","setListeners","getListenerType","handlerChange","clearErrors","_this11","_this12","querySelectorAll","from","groupElem","unshift","parentNode","remove","_r$elem$classList","style","successFieldStyle","classList","apply","_this13","_loop2","_i$classList","_i$classList2","tooltip","disabled","pointerEvents","webkitFilter","getAttribute","removeAttribute","_this14","_e$getBoundingClientR","getBoundingClientRect","top","left","width","height","position","dataset","direction","renderTooltip","_s$classList","innerHTML","assign","add","testId","_s$classList2","successLabelStyle","errorsContainer","renderErrorsContainer","parentElement","tagName","toLowerCase","_this15","showLabels","_d$elem$classList2","_d$elem$classList","createSuccessLabelElem","renderFieldLabel","createErrorLabelElem","_this16","_e$classList","renderGroupLabel","_e$classList2","_this17","_this18","destroy","addField"],"mappings":"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","file":"just-validate.js","sourcesContent":["var __defProp=Object.defineProperty,__defNormalProp=(e,i,t)=>i in e?__defProp(e,i,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[i]=t,__publicField=(e,i,t)=>(__defNormalProp(e,\"symbol\"!=typeof i?i+\"\":i,t),t);!function(e,i){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=i():\"function\"==typeof define&&define.amd?define(i):(e=\"undefined\"!=typeof globalThis?globalThis:e||self).JustValidate=i()}(this,(function(){\"use strict\";const e=/^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/,i=/^-?[0-9]\\d*$/,t=/^(?=.*[A-Za-z])(?=.*\\d).{8,}$/,s=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[@$!%*?&])[A-Za-z\\d@$!%*?&]{8,}$/,l=e=>\"string\"!=typeof e||\"\"===e;var r=(e=>(e.Required=\"required\",e.Email=\"email\",e.MinLength=\"minLength\",e.MaxLength=\"maxLength\",e.Password=\"password\",e.Number=\"number\",e.Integer=\"integer\",e.MaxNumber=\"maxNumber\",e.MinNumber=\"minNumber\",e.StrongPassword=\"strongPassword\",e.CustomRegexp=\"customRegexp\",e.MinFilesCount=\"minFilesCount\",e.MaxFilesCount=\"maxFilesCount\",e.Files=\"files\",e))(r||{}),o=(e=>(e.Required=\"required\",e))(o||{}),a=(e=>(e.Label=\"label\",e.LabelArrow=\"labelArrow\",e))(a||{});const n=[{key:r.Required,dict:{en:\"The field is required\"}},{key:r.Email,dict:{en:\"Email has invalid format\"}},{key:r.MaxLength,dict:{en:\"The field must contain a maximum of :value characters\"}},{key:r.MinLength,dict:{en:\"The field must contain a minimum of :value characters\"}},{key:r.Password,dict:{en:\"Password must contain minimum eight characters, at least one letter and one number\"}},{key:r.StrongPassword,dict:{en:\"Password should contain minimum eight characters, at least one uppercase letter, one lowercase letter, one number and one special character\"}},{key:r.Number,dict:{en:\"Value should be a number\"}},{key:r.MaxNumber,dict:{en:\"Number should be less or equal than :value\"}},{key:r.MinNumber,dict:{en:\"Number should be more or equal than :value\"}},{key:r.MinFilesCount,dict:{en:\"Files count should be more or equal than :value\"}},{key:r.MaxFilesCount,dict:{en:\"Files count should be less or equal than :value\"}},{key:r.Files,dict:{en:\"Uploaded files have one or several invalid properties (extension/size/type etc).\"}}],d=e=>\"object\"==typeof e&&null!==e&&\"then\"in e&&\"function\"==typeof e.then,c=e=>Array.isArray(e)?e.filter((e=>e.length>0)):\"string\"==typeof e&&e.trim()?[...e.split(\" \").filter((e=>e.length>0))]:[],u=e=>e instanceof Element||e instanceof HTMLDocument,h={errorFieldStyle:{color:\"#b81111\",border:\"1px solid #B81111\"},errorFieldCssClass:\"just-validate-error-field\",successFieldCssClass:\"just-validate-success-field\",errorLabelStyle:{color:\"#b81111\"},errorLabelCssClass:\"just-validate-error-label\",successLabelCssClass:\"just-validate-success-label\",focusInvalidField:!0,lockForm:!0,testingMode:!1,validateBeforeSubmitting:!1,submitFormAutomatically:!1};return class{constructor(e,i,t){__publicField(this,\"form\",null),__publicField(this,\"fields\",{}),__publicField(this,\"groupFields\",{}),__publicField(this,\"errors\",{}),__publicField(this,\"isValid\",!1),__publicField(this,\"isSubmitted\",!1),__publicField(this,\"globalConfig\",h),__publicField(this,\"errorLabels\",{}),__publicField(this,\"successLabels\",{}),__publicField(this,\"eventListeners\",[]),__publicField(this,\"dictLocale\",n),__publicField(this,\"currentLocale\",\"en\"),__publicField(this,\"customStyleTags\",{}),__publicField(this,\"onSuccessCallback\"),__publicField(this,\"onFailCallback\"),__publicField(this,\"onValidateCallback\"),__publicField(this,\"tooltips\",[]),__publicField(this,\"lastScrollPosition\"),__publicField(this,\"isScrollTick\"),__publicField(this,\"fieldIds\",new Map),__publicField(this,\"getKeyByFieldSelector\",(e=>this.fieldIds.get(e))),__publicField(this,\"getFieldSelectorByKey\",(e=>{for(const[i,t]of this.fieldIds)if(e===t)return i})),__publicField(this,\"getCompatibleFields\",(()=>{const e={};return Object.keys(this.fields).forEach((i=>{let t=i;const s=this.getFieldSelectorByKey(i);\"string\"==typeof s&&(t=s),e[t]={...this.fields[i]}})),e})),__publicField(this,\"setKeyByFieldSelector\",(e=>{if(this.fieldIds.has(e))return this.fieldIds.get(e);const i=String(this.fieldIds.size+1);return this.fieldIds.set(e,i),i})),__publicField(this,\"refreshAllTooltips\",(()=>{this.tooltips.forEach((e=>{e.refresh()}))})),__publicField(this,\"handleDocumentScroll\",(()=>{this.lastScrollPosition=window.scrollY,this.isScrollTick||(window.requestAnimationFrame((()=>{this.refreshAllTooltips(),this.isScrollTick=!1})),this.isScrollTick=!0)})),__publicField(this,\"formSubmitHandler\",(e=>{e.preventDefault(),this.isSubmitted=!0,this.validateHandler(e)})),__publicField(this,\"handleFieldChange\",(e=>{let i;for(const t in this.fields){if(this.fields[t].elem===e){i=t;break}}i&&(this.fields[i].touched=!0,this.validateField(i,!0))})),__publicField(this,\"handleGroupChange\",(e=>{let i;for(const t in this.groupFields){if(this.groupFields[t].elems.find((i=>i===e))){i=t;break}}i&&(this.groupFields[i].touched=!0,this.validateGroup(i,!0))})),__publicField(this,\"handlerChange\",(e=>{e.target&&(this.handleFieldChange(e.target),this.handleGroupChange(e.target),this.renderErrors())})),this.initialize(e,i,t)}initialize(e,i,t){if(this.form=null,this.errors={},this.isValid=!1,this.isSubmitted=!1,this.globalConfig=h,this.errorLabels={},this.successLabels={},this.eventListeners=[],this.customStyleTags={},this.tooltips=[],this.currentLocale=\"en\",\"string\"==typeof e){const i=document.querySelector(e);if(!i)throw Error(`Form with ${e} selector not found! Please check the form selector`);this.setForm(i)}else{if(!(e instanceof HTMLFormElement))throw Error(\"Form selector is not valid. Please specify a string selector or a DOM element.\");this.setForm(e)}if(this.globalConfig={...h,...i},t&&(this.dictLocale=[...t,...n]),this.isTooltip()){const e=document.createElement(\"style\");e.textContent=\".just-validate-error-label[data-tooltip=true]{position:fixed;padding:4px 8px;background:#423f3f;color:#fff;white-space:nowrap;z-index:10;border-radius:4px;transform:translateY(-5px)}.just-validate-error-label[data-tooltip=true]:before{content:'';width:0;height:0;border-left:solid 5px transparent;border-right:solid 5px transparent;border-bottom:solid 5px #423f3f;position:absolute;z-index:3;display:block;bottom:-5px;transform:rotate(180deg);left:calc(50% - 5px)}.just-validate-error-label[data-tooltip=true][data-direction=left]{transform:translateX(-5px)}.just-validate-error-label[data-tooltip=true][data-direction=left]:before{right:-7px;bottom:auto;left:auto;top:calc(50% - 2px);transform:rotate(90deg)}.just-validate-error-label[data-tooltip=true][data-direction=right]{transform:translateX(5px)}.just-validate-error-label[data-tooltip=true][data-direction=right]:before{right:auto;bottom:auto;left:-7px;top:calc(50% - 2px);transform:rotate(-90deg)}.just-validate-error-label[data-tooltip=true][data-direction=bottom]{transform:translateY(5px)}.just-validate-error-label[data-tooltip=true][data-direction=bottom]:before{right:auto;bottom:auto;left:calc(50% - 5px);top:-5px;transform:rotate(0)}\",this.customStyleTags[a.Label]=document.head.appendChild(e),this.addListener(\"scroll\",document,this.handleDocumentScroll)}}getLocalisedString(e,i,t){var s;const l=null!=t?t:e;let o=null==(s=this.dictLocale.find((e=>e.key===l)))?void 0:s.dict[this.currentLocale];if(o||t&&(o=t),o&&void 0!==i)switch(e){case r.MaxLength:case r.MinLength:case r.MaxNumber:case r.MinNumber:case r.MinFilesCount:case r.MaxFilesCount:o=o.replace(\":value\",String(i))}return o||t||\"Value is incorrect\"}getFieldErrorMessage(e,i){const t=\"function\"==typeof e.errorMessage?e.errorMessage(this.getElemValue(i),this.fields):e.errorMessage;return this.getLocalisedString(e.rule,e.value,t)}getFieldSuccessMessage(e,i){const t=\"function\"==typeof e?e(this.getElemValue(i),this.fields):e;return this.getLocalisedString(void 0,void 0,t)}getGroupErrorMessage(e){return this.getLocalisedString(e.rule,void 0,e.errorMessage)}getGroupSuccessMessage(e){if(e.successMessage)return this.getLocalisedString(void 0,void 0,e.successMessage)}setFieldInvalid(e,i){this.fields[e].isValid=!1,this.fields[e].errorMessage=this.getFieldErrorMessage(i,this.fields[e].elem)}setFieldValid(e,i){this.fields[e].isValid=!0,void 0!==i&&(this.fields[e].successMessage=this.getFieldSuccessMessage(i,this.fields[e].elem))}setGroupInvalid(e,i){this.groupFields[e].isValid=!1,this.groupFields[e].errorMessage=this.getGroupErrorMessage(i)}setGroupValid(e,i){this.groupFields[e].isValid=!0,this.groupFields[e].successMessage=this.getGroupSuccessMessage(i)}getElemValue(e){switch(e.type){case\"checkbox\":return e.checked;case\"file\":return e.files;default:return e.value}}validateGroupRule(e,i,t){if(t.rule===o.Required)i.every((e=>!e.checked))?this.setGroupInvalid(e,t):this.setGroupValid(e,t)}validateFieldRule(o,a,n,c=!1){const u=n.value,h=this.getElemValue(a);if(n.plugin){n.plugin(h,this.getCompatibleFields())||this.setFieldInvalid(o,n)}else{switch(n.rule){case r.Required:(e=>{let i=e;return\"string\"==typeof e&&(i=e.trim()),!i})(h)&&this.setFieldInvalid(o,n);break;case r.Email:if(l(h))break;f=h,e.test(f)||this.setFieldInvalid(o,n);break;case r.MaxLength:if(void 0===u){console.error(`Value for ${n.rule} rule for [${o}] field is not defined. The field will be always invalid.`),this.setFieldInvalid(o,n);break}if(\"number\"!=typeof u){console.error(`Value for ${n.rule} rule for [${o}] should be a number. The field will be always invalid.`),this.setFieldInvalid(o,n);break}if(l(h))break;((e,i)=>e.length>i)(h,u)&&this.setFieldInvalid(o,n);break;case r.MinLength:if(void 0===u){console.error(`Value for ${n.rule} rule for [${o}] field is not defined. The field will be always invalid.`),this.setFieldInvalid(o,n);break}if(\"number\"!=typeof u){console.error(`Value for ${n.rule} rule for [${o}] should be a number. The field will be always invalid.`),this.setFieldInvalid(o,n);break}if(l(h))break;((e,i)=>e.length<i)(h,u)&&this.setFieldInvalid(o,n);break;case r.Password:if(l(h))break;(e=>t.test(e))(h)||this.setFieldInvalid(o,n);break;case r.StrongPassword:if(l(h))break;(e=>s.test(e))(h)||this.setFieldInvalid(o,n);break;case r.Number:if(l(h))break;(e=>\"string\"==typeof e&&!isNaN(+e)&&!isNaN(parseFloat(e)))(h)||this.setFieldInvalid(o,n);break;case r.Integer:if(l(h))break;(e=>i.test(e))(h)||this.setFieldInvalid(o,n);break;case r.MaxNumber:{if(void 0===u){console.error(`Value for ${n.rule} rule for [${o}] field is not defined. The field will be always invalid.`),this.setFieldInvalid(o,n);break}if(\"number\"!=typeof u){console.error(`Value for ${n.rule} rule for [${o}] field should be a number. The field will be always invalid.`),this.setFieldInvalid(o,n);break}if(l(h))break;const e=+h;(Number.isNaN(e)||((e,i)=>e>i)(e,u))&&this.setFieldInvalid(o,n);break}case r.MinNumber:{if(void 0===u){console.error(`Value for ${n.rule} rule for [${o}] field is not defined. The field will be always invalid.`),this.setFieldInvalid(o,n);break}if(\"number\"!=typeof u){console.error(`Value for ${n.rule} rule for [${o}] field should be a number. The field will be always invalid.`),this.setFieldInvalid(o,n);break}if(l(h))break;const e=+h;(Number.isNaN(e)||((e,i)=>e<i)(e,u))&&this.setFieldInvalid(o,n);break}case r.CustomRegexp:{if(void 0===u)return console.error(`Value for ${n.rule} rule for [${o}] field is not defined. This field will be always invalid.`),void this.setFieldInvalid(o,n);let e;try{e=new RegExp(u)}catch(b){console.error(`Value for ${n.rule} rule for [${o}] should be a valid regexp. This field will be always invalid.`),this.setFieldInvalid(o,n);break}const i=String(h);\"\"===i||e.test(i)||this.setFieldInvalid(o,n);break}case r.MinFilesCount:if(void 0===u){console.error(`Value for ${n.rule} rule for [${o}] field is not defined. This field will be always invalid.`),this.setFieldInvalid(o,n);break}if(\"number\"!=typeof u){console.error(`Value for ${n.rule} rule for [${o}] field should be a number. The field will be always invalid.`),this.setFieldInvalid(o,n);break}if(Number.isFinite(null==h?void 0:h.length)&&h.length<u){this.setFieldInvalid(o,n);break}break;case r.MaxFilesCount:if(void 0===u){console.error(`Value for ${n.rule} rule for [${o}] field is not defined. This field will be always invalid.`),this.setFieldInvalid(o,n);break}if(\"number\"!=typeof u){console.error(`Value for ${n.rule} rule for [${o}] field should be a number. The field will be always invalid.`),this.setFieldInvalid(o,n);break}if(Number.isFinite(null==h?void 0:h.length)&&h.length>u){this.setFieldInvalid(o,n);break}break;case r.Files:{if(void 0===u)return console.error(`Value for ${n.rule} rule for [${o}] field is not defined. This field will be always invalid.`),void this.setFieldInvalid(o,n);if(\"object\"!=typeof u)return console.error(`Value for ${n.rule} rule for [${o}] field should be an object. This field will be always invalid.`),void this.setFieldInvalid(o,n);const e=u.files;if(\"object\"!=typeof e)return console.error(`Value for ${n.rule} rule for [${o}] field should be an object with files array. This field will be always invalid.`),void this.setFieldInvalid(o,n);const i=(e,i)=>{const t=Number.isFinite(i.minSize)&&e.size<i.minSize,s=Number.isFinite(i.maxSize)&&e.size>i.maxSize,l=Array.isArray(i.names)&&!i.names.includes(e.name),r=Array.isArray(i.extensions)&&!i.extensions.includes(e.name.split(\".\")[e.name.split(\".\").length-1]),o=Array.isArray(i.types)&&!i.types.includes(e.type);return t||s||l||r||o};if(\"object\"==typeof h&&null!==h)for(let t=0,s=h.length;t<s;++t){const s=h.item(t);if(!s){this.setFieldInvalid(o,n);break}if(i(s,e)){this.setFieldInvalid(o,n);break}}break}default:{if(\"function\"!=typeof n.validator)return console.error(`Validator for custom rule for [${o}] field should be a function. This field will be always invalid.`),void this.setFieldInvalid(o,n);const e=n.validator(h,this.getCompatibleFields());if(\"boolean\"!=typeof e&&\"function\"!=typeof e&&console.error(`Validator return value for [${o}] field should be boolean or function. It will be cast to boolean.`),\"function\"==typeof e){if(!c){this.fields[o].asyncCheckPending=!1;const i=e();return d(i)?i.then((e=>{e||this.setFieldInvalid(o,n)})).catch((()=>{this.setFieldInvalid(o,n)})):(console.error(`Validator function for custom rule for [${o}] field should return a Promise. This field will be always invalid.`),void this.setFieldInvalid(o,n))}this.fields[o].asyncCheckPending=!0}e||this.setFieldInvalid(o,n)}}var f}}isFormValid(){let e=!0;for(let i=0,t=Object.values(this.fields).length;i<t;++i){const t=Object.values(this.fields)[i];if(void 0===t.isValid){e=void 0;break}if(!1===t.isValid){e=!1;break}}for(let i=0,t=Object.values(this.groupFields).length;i<t;++i){const t=Object.values(this.groupFields)[i];if(void 0===t.isValid){e=void 0;break}if(!1===t.isValid){e=!1;break}}return e}validateField(e,i=!1){var t;const s=this.fields[e];s.isValid=!0;const l=[];return[...s.rules].reverse().forEach((t=>{const r=this.validateFieldRule(e,s.elem,t,i);d(r)&&l.push(r)})),s.isValid&&this.setFieldValid(e,null==(t=s.config)?void 0:t.successMessage),Promise.allSettled(l).finally((()=>{var e;i&&(null==(e=this.onValidateCallback)||e.call(this,{isValid:this.isFormValid(),isSubmitted:this.isSubmitted,fields:this.getCompatibleFields(),groups:{...this.groupFields}}))}))}revalidateField(e){if(\"string\"!=typeof e&&!u(e))throw Error(\"Field selector is not valid. Please specify a string selector or a valid DOM element.\");const i=this.getKeyByFieldSelector(e);return i&&this.fields[i]?new Promise((e=>{this.validateField(i,!0).finally((()=>{this.clearFieldStyle(i),this.clearFieldLabel(i),this.renderFieldError(i,!0),e(!!this.fields[i].isValid)}))})):(console.error(\"Field not found. Check the field selector.\"),Promise.reject())}revalidateGroup(e){if(\"string\"!=typeof e&&!u(e))throw Error(\"Group selector is not valid. Please specify a string selector or a valid DOM element.\");const i=this.getKeyByFieldSelector(e);return i&&this.groupFields[i]?new Promise((e=>{this.validateGroup(i).finally((()=>{this.clearFieldLabel(i),this.renderGroupError(i,!0),e(!!this.groupFields[i].isValid)}))})):(console.error(\"Group not found. Check the group selector.\"),Promise.reject())}validateGroup(e,i=!1){const t=this.groupFields[e],s=[];return[...t.rules].reverse().forEach((i=>{const l=this.validateGroupRule(e,t.elems,i);d(l)&&s.push(l)})),Promise.allSettled(s).finally((()=>{var e;i&&(null==(e=this.onValidateCallback)||e.call(this,{isValid:this.isFormValid(),isSubmitted:this.isSubmitted,fields:this.getCompatibleFields(),groups:{...this.groupFields}}))}))}focusInvalidField(){for(const e in this.fields){const i=this.fields[e];if(!i.isValid){setTimeout((()=>i.elem.focus()),0);break}}}afterSubmitValidation(e=!1){this.renderErrors(e),this.globalConfig.focusInvalidField&&this.focusInvalidField()}validate(e=!1){return new Promise((i=>{const t=[];Object.keys(this.fields).forEach((e=>{const i=this.validateField(e);d(i)&&t.push(i)})),Object.keys(this.groupFields).forEach((e=>{const i=this.validateGroup(e);d(i)&&t.push(i)})),Promise.allSettled(t).then((()=>{var s;this.afterSubmitValidation(e),null==(s=this.onValidateCallback)||s.call(this,{isValid:this.isFormValid(),isSubmitted:this.isSubmitted,fields:this.getCompatibleFields(),groups:{...this.groupFields}}),i(!!t.length)}))}))}revalidate(){return new Promise((e=>{this.validateHandler(void 0,!0).finally((()=>{this.globalConfig.focusInvalidField&&this.focusInvalidField(),e(this.isValid)}))}))}validateHandler(e,i=!1){return this.globalConfig.lockForm&&this.lockForm(),this.validate(i).finally((()=>{var i,t,s;this.globalConfig.lockForm&&this.unlockForm(),this.isValid?(null==(i=this.onSuccessCallback)||i.call(this,e),this.globalConfig.submitFormAutomatically&&(null==(t=null==e?void 0:e.currentTarget)||t.submit())):null==(s=this.onFailCallback)||s.call(this,this.getCompatibleFields(),this.groupFields)}))}setForm(e){this.form=e,this.form.setAttribute(\"novalidate\",\"novalidate\"),this.removeListener(\"submit\",this.form,this.formSubmitHandler),this.addListener(\"submit\",this.form,this.formSubmitHandler)}addListener(e,i,t){i.addEventListener(e,t),this.eventListeners.push({type:e,elem:i,func:t})}removeListener(e,i,t){i.removeEventListener(e,t),this.eventListeners=this.eventListeners.filter((t=>t.type!==e||t.elem!==i))}addField(e,i,t){if(\"string\"!=typeof e&&!u(e))throw Error(\"Field selector is not valid. Please specify a string selector or a valid DOM element.\");let s;if(s=\"string\"==typeof e?this.form.querySelector(e):e,!s)throw Error(\"Field doesn't exist in the DOM! Please check the field selector.\");if(!Array.isArray(i)||!i.length)throw Error(\"Rules argument should be an array and should contain at least 1 element.\");i.forEach((e=>{if(!(\"rule\"in e||\"validator\"in e||\"plugin\"in e))throw Error(\"Rules argument must contain at least one rule or validator property.\");if(!(e.validator||e.plugin||e.rule&&Object.values(r).includes(e.rule)))throw Error(`Rule should be one of these types: ${Object.values(r).join(\", \")}. Provided value: ${e.rule}`)}));const l=this.setKeyByFieldSelector(e);return this.fields[l]={elem:s,rules:i,isValid:void 0,touched:!1,config:t},this.setListeners(s),(this.isSubmitted||this.globalConfig.validateBeforeSubmitting)&&this.validateField(l),this}removeField(e){if(\"string\"!=typeof e&&!u(e))throw Error(\"Field selector is not valid. Please specify a string selector or a valid DOM element.\");const i=this.getKeyByFieldSelector(e);if(!i||!this.fields[i])return console.error(\"Field not found. Check the field selector.\"),this;const t=this.getListenerType(this.fields[i].elem.type);return this.removeListener(t,this.fields[i].elem,this.handlerChange),this.clearErrors(),delete this.fields[i],this}removeGroup(e){if(\"string\"!=typeof e)throw Error(\"Group selector is not valid. Please specify a string selector.\");const i=this.getKeyByFieldSelector(e);return i&&this.groupFields[i]?(this.groupFields[i].elems.forEach((e=>{const i=this.getListenerType(e.type);this.removeListener(i,e,this.handlerChange)})),this.clearErrors(),delete this.groupFields[i],this):(console.error(\"Group not found. Check the group selector.\"),this)}addRequiredGroup(e,i,t,s){if(\"string\"!=typeof e&&!u(e))throw Error(\"Group selector is not valid. Please specify a string selector or a valid DOM element.\");let l;if(l=\"string\"==typeof e?this.form.querySelector(e):e,!l)throw Error(\"Group selector not found! Please check the group selector.\");const r=l.querySelectorAll(\"input\"),a=Array.from(r).filter((e=>{const i=((e,i)=>{const t=[...i].reverse();for(let s=0,l=t.length;s<l;++s){const i=t[s];for(const t in e){const s=e[t];if(s.groupElem===i)return[t,s]}}return null})(this.groupFields,(e=>{let i=e;const t=[];for(;i;)t.unshift(i),i=i.parentNode;return t})(e));return!i||i[1].elems.find((i=>i!==e))})),n=this.setKeyByFieldSelector(e);return this.groupFields[n]={rules:[{rule:o.Required,errorMessage:i,successMessage:s}],groupElem:l,elems:a,touched:!1,isValid:void 0,config:t},r.forEach((e=>{this.setListeners(e)})),this}getListenerType(e){switch(e){case\"checkbox\":case\"select-one\":case\"file\":case\"radio\":return\"change\";default:return\"input\"}}setListeners(e){const i=this.getListenerType(e.type);this.removeListener(i,e,this.handlerChange),this.addListener(i,e,this.handlerChange)}clearFieldLabel(e){var i,t;null==(i=this.errorLabels[e])||i.remove(),null==(t=this.successLabels[e])||t.remove()}clearFieldStyle(e){var i,t,s,l;const r=this.fields[e],o=(null==(i=r.config)?void 0:i.errorFieldStyle)||this.globalConfig.errorFieldStyle;Object.keys(o).forEach((e=>{r.elem.style[e]=\"\"}));const a=(null==(t=r.config)?void 0:t.successFieldStyle)||this.globalConfig.successFieldStyle||{};Object.keys(a).forEach((e=>{r.elem.style[e]=\"\"})),r.elem.classList.remove(...c((null==(s=r.config)?void 0:s.errorFieldCssClass)||this.globalConfig.errorFieldCssClass),...c((null==(l=r.config)?void 0:l.successFieldCssClass)||this.globalConfig.successFieldCssClass))}clearErrors(){var e,i;Object.keys(this.errorLabels).forEach((e=>this.errorLabels[e].remove())),Object.keys(this.successLabels).forEach((e=>this.successLabels[e].remove()));for(const t in this.fields)this.clearFieldStyle(t);for(const t in this.groupFields){const s=this.groupFields[t],l=(null==(e=s.config)?void 0:e.errorFieldStyle)||this.globalConfig.errorFieldStyle;Object.keys(l).forEach((e=>{s.elems.forEach((i=>{var t;i.style[e]=\"\",i.classList.remove(...c((null==(t=s.config)?void 0:t.errorFieldCssClass)||this.globalConfig.errorFieldCssClass))}))}));const r=(null==(i=s.config)?void 0:i.successFieldStyle)||this.globalConfig.successFieldStyle||{};Object.keys(r).forEach((e=>{s.elems.forEach((i=>{var t;i.style[e]=\"\",i.classList.remove(...c((null==(t=s.config)?void 0:t.successFieldCssClass)||this.globalConfig.successFieldCssClass))}))}))}this.tooltips=[]}isTooltip(){return!!this.globalConfig.tooltip}lockForm(){const e=this.form.querySelectorAll(\"input, textarea, button, select\");for(let i=0,t=e.length;i<t;++i)e[i].setAttribute(\"data-just-validate-fallback-disabled\",e[i].disabled?\"true\":\"false\"),e[i].setAttribute(\"disabled\",\"disabled\"),e[i].style.pointerEvents=\"none\",e[i].style.webkitFilter=\"grayscale(100%)\",e[i].style.filter=\"grayscale(100%)\"}unlockForm(){const e=this.form.querySelectorAll(\"input, textarea, button, select\");for(let i=0,t=e.length;i<t;++i)\"true\"!==e[i].getAttribute(\"data-just-validate-fallback-disabled\")&&e[i].removeAttribute(\"disabled\"),e[i].style.pointerEvents=\"\",e[i].style.webkitFilter=\"\",e[i].style.filter=\"\"}renderTooltip(e,i,t){var s;const{top:l,left:r,width:o,height:a}=e.getBoundingClientRect(),n=i.getBoundingClientRect(),d=t||(null==(s=this.globalConfig.tooltip)?void 0:s.position);switch(d){case\"left\":i.style.top=l+a/2-n.height/2+\"px\",i.style.left=r-n.width-5+\"px\";break;case\"top\":i.style.top=l-n.height-5+\"px\",i.style.left=r+o/2-n.width/2+\"px\";break;case\"right\":i.style.top=l+a/2-n.height/2+\"px\",i.style.left=`${r+o+5}px`;break;case\"bottom\":i.style.top=`${l+a+5}px`,i.style.left=r+o/2-n.width/2+\"px\"}i.dataset.direction=d;return{refresh:()=>{this.renderTooltip(e,i,t)}}}createErrorLabelElem(e,i,t){const s=document.createElement(\"div\");s.innerHTML=i;const l=this.isTooltip()?null==t?void 0:t.errorLabelStyle:(null==t?void 0:t.errorLabelStyle)||this.globalConfig.errorLabelStyle;return Object.assign(s.style,l),s.classList.add(...c((null==t?void 0:t.errorLabelCssClass)||this.globalConfig.errorLabelCssClass),\"just-validate-error-label\"),this.isTooltip()&&(s.dataset.tooltip=\"true\"),this.globalConfig.testingMode&&(s.dataset.testId=`error-label-${e}`),this.errorLabels[e]=s,s}createSuccessLabelElem(e,i,t){if(void 0===i)return null;const s=document.createElement(\"div\");s.innerHTML=i;const l=(null==t?void 0:t.successLabelStyle)||this.globalConfig.successLabelStyle;return Object.assign(s.style,l),s.classList.add(...c((null==t?void 0:t.successLabelCssClass)||this.globalConfig.successLabelCssClass),\"just-validate-success-label\"),this.globalConfig.testingMode&&(s.dataset.testId=`success-label-${e}`),this.successLabels[e]=s,s}renderErrorsContainer(e,i){const t=i||this.globalConfig.errorsContainer;if(\"string\"==typeof t){const i=this.form.querySelector(t);if(i)return i.appendChild(e),!0;console.error(`Error container with ${t} selector not found. Errors will be rendered as usual`)}return t instanceof Element?(t.appendChild(e),!0):(void 0!==t&&console.error(\"Error container not found. It should be a string or existing Element. Errors will be rendered as usual\"),!1)}renderGroupLabel(e,i,t,s){if(!s){if(this.renderErrorsContainer(i,t))return}e.appendChild(i)}renderFieldLabel(e,i,t,s){var l,r,o,a,n,d,c;if(!s){if(this.renderErrorsContainer(i,t))return}if(\"checkbox\"===e.type||\"radio\"===e.type){const t=document.querySelector(`label[for=\"${e.getAttribute(\"id\")}\"]`);\"label\"===(null==(r=null==(l=e.parentElement)?void 0:l.tagName)?void 0:r.toLowerCase())?null==(a=null==(o=e.parentElement)?void 0:o.parentElement)||a.appendChild(i):t?null==(n=t.parentElement)||n.appendChild(i):null==(d=e.parentElement)||d.appendChild(i)}else null==(c=e.parentElement)||c.appendChild(i)}showLabels(e,i){Object.keys(e).forEach(((t,s)=>{const l=e[t],r=this.getKeyByFieldSelector(t);if(!r||!this.fields[r])return void console.error(\"Field not found. Check the field selector.\");const o=this.fields[r];o.isValid=!i,this.clearFieldStyle(r),this.clearFieldLabel(r),this.renderFieldError(r,!1,l),0===s&&this.globalConfig.focusInvalidField&&setTimeout((()=>o.elem.focus()),0)}))}showErrors(e){if(\"object\"!=typeof e)throw Error(\"[showErrors]: Errors should be an object with key: value format\");this.showLabels(e,!0)}showSuccessLabels(e){if(\"object\"!=typeof e)throw Error(\"[showSuccessLabels]: Labels should be an object with key: value format\");this.showLabels(e,!1)}renderFieldError(e,i=!1,t){var s,l,r,o,a,n;const d=this.fields[e];if(!1===d.isValid&&(this.isValid=!1),void 0===d.isValid||!i&&!this.isSubmitted&&!d.touched&&void 0===t)return;if(d.isValid){if(!d.asyncCheckPending){const i=this.createSuccessLabelElem(e,void 0!==t?t:d.successMessage,d.config);i&&this.renderFieldLabel(d.elem,i,null==(s=d.config)?void 0:s.errorsContainer,!0),d.elem.classList.add(...c((null==(l=d.config)?void 0:l.successFieldCssClass)||this.globalConfig.successFieldCssClass))}return}d.elem.classList.add(...c((null==(r=d.config)?void 0:r.errorFieldCssClass)||this.globalConfig.errorFieldCssClass));const u=this.createErrorLabelElem(e,void 0!==t?t:d.errorMessage,d.config);this.renderFieldLabel(d.elem,u,null==(o=d.config)?void 0:o.errorsContainer),this.isTooltip()&&this.tooltips.push(this.renderTooltip(d.elem,u,null==(n=null==(a=d.config)?void 0:a.tooltip)?void 0:n.position))}renderGroupError(e,i=!0){var t,s,l,r;const o=this.groupFields[e];if(!1===o.isValid&&(this.isValid=!1),void 0===o.isValid||!i&&!this.isSubmitted&&!o.touched)return;if(o.isValid){o.elems.forEach((e=>{var i,t;Object.assign(e.style,(null==(i=o.config)?void 0:i.successFieldStyle)||this.globalConfig.successFieldStyle),e.classList.add(...c((null==(t=o.config)?void 0:t.successFieldCssClass)||this.globalConfig.successFieldCssClass))}));const i=this.createSuccessLabelElem(e,o.successMessage,o.config);return void(i&&this.renderGroupLabel(o.groupElem,i,null==(t=o.config)?void 0:t.errorsContainer,!0))}this.isValid=!1,o.elems.forEach((e=>{var i,t;Object.assign(e.style,(null==(i=o.config)?void 0:i.errorFieldStyle)||this.globalConfig.errorFieldStyle),e.classList.add(...c((null==(t=o.config)?void 0:t.errorFieldCssClass)||this.globalConfig.errorFieldCssClass))}));const a=this.createErrorLabelElem(e,o.errorMessage,o.config);this.renderGroupLabel(o.groupElem,a,null==(s=o.config)?void 0:s.errorsContainer),this.isTooltip()&&this.tooltips.push(this.renderTooltip(o.groupElem,a,null==(r=null==(l=o.config)?void 0:l.tooltip)?void 0:r.position))}renderErrors(e=!1){if(this.isSubmitted||e||this.globalConfig.validateBeforeSubmitting){this.clearErrors(),this.isValid=!0;for(const e in this.groupFields)this.renderGroupError(e);for(const e in this.fields)this.renderFieldError(e)}}destroy(){this.eventListeners.forEach((e=>{this.removeListener(e.type,e.elem,e.func)})),Object.keys(this.customStyleTags).forEach((e=>{this.customStyleTags[e].remove()})),this.clearErrors(),this.globalConfig.lockForm&&this.unlockForm()}refresh(){this.destroy(),this.form?(this.initialize(this.form,this.globalConfig),Object.keys(this.fields).forEach((e=>{const i=this.getFieldSelectorByKey(e);i&&this.addField(i,[...this.fields[e].rules],this.fields[e].config)}))):console.error(\"Cannot initialize the library! Form is not defined\")}setCurrentLocale(e){\"string\"==typeof e||void 0===e?(this.currentLocale=e,this.isSubmitted&&this.validate()):console.error(\"Current locale should be a string\")}onSuccess(e){return this.onSuccessCallback=e,this}onFail(e){return this.onFailCallback=e,this}onValidate(e){return this.onValidateCallback=e,this}}}));\n"]}